document.addEventListener("alpine:init",()=>{Alpine.data("tinymce",(a={},o={})=>({options:a,callbacks:o,fileManager:(e,t,i)=>{const n=config(Alpine.store("darkMode").on),l=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,c=n.path_absolute+n.file_manager+"?editor="+i.fieldname+(i.filetype==="image"?"&type=Images":"&type=Files");tinymce.activeEditor.windowManager.openUrl({url:c,title:"File Manager",width:l*.8,height:s*.8,resizable:"yes",close_previous:"no",onMessage:(d,r)=>e(r.content)})},async init(){await this.$nextTick();const e=new tinymce.Editor(this.$el.getAttribute("id"),this.config(Alpine.store("darkMode").on),tinymce.EditorManager);e.on("blur",()=>tinymce.activeEditor.save()),e.render(),window.addEventListener("darkMode:toggle",()=>tinymce.remove(e))},config(e){for(const t in this.callbacks)this.callbacks[t]=new Function("return "+this.callbacks[t])();return Object.assign({path_absolute:"/",file_manager:"",relative_urls:!1,branding:!1,height:50,skin:e?"oxide-dark":"oxide",content_css:e?"dark":"default",file_picker_callback:this.options.file_manager?this.fileManager:null},this.options,this.callbacks)}}))});
